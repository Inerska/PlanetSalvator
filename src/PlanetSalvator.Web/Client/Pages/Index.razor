@page "/"
@using Microsoft.AspNetCore.Authorization
@attribute [Authorize]

@inject HttpClient _httpClient
@inject AuthenticationStateProvider _authenticationStateProvider
@inject NavigationManager _navigationManager

<PageTitle>Index</PageTitle>

<Breadcrumb>
    <BreadcrumbItem Href="@_navigationManager.Uri">
        <Icon Type="home" />
    </BreadcrumbItem>
</Breadcrumb>
<br/>

<Card Bordered="false" Title="Vos points" Style="width: 300px">
    <Body>
    <p>@Points</p>
    </Body>
</Card>

@code
{
    public int Points { get; set; }

    protected override async Task OnInitializedAsync()
    {
        var authenticationState = await _authenticationStateProvider.GetAuthenticationStateAsync();
        var user = authenticationState.User;
        var email = user.Identity.Name;

    // Generate daily tasks

    // Wrap email in json object


        Points = await _httpClient.GetFromJsonAsync<int>($"api/UserPoints?Email={email}");
    }
}